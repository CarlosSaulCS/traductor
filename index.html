<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sincronizador de Letras - Cama y Mesa</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸµ Sincronizador de Letras</h1>
            <h2>"Cama y Mesa" - Roberto Carlos</h2>
        </header>

        <main>
            <!-- Audio Player -->
            <div class="audio-section">
                <audio id="audioPlayer" controls>
                    <source src="audio/Roberto Carlos - Cama y Mesa.mp3" type="audio/mpeg">
                    Su navegador no soporta el elemento de audio.
                </audio>
                <p class="audio-note">âœ… Audio cargado: Roberto Carlos - Cama y Mesa.mp3</p>
            </div>

            <!-- Language Selector -->
            <div class="language-selector">
                <button id="spanishBtn" class="lang-btn active" onclick="switchLanguage('spanish')">
                    ğŸ‡ªğŸ‡¸ EspaÃ±ol
                </button>
                <button id="englishBtn" class="lang-btn" onclick="switchLanguage('english')">
                    ğŸ‡¬ğŸ‡§ English
                </button>
                <button id="bothBtn" class="lang-btn" onclick="switchLanguage('both')">
                    ğŸŒ Ambos/Both
                </button>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>

            <!-- Lyrics Display -->
            <div class="lyrics-container">
                <div id="lyricsDisplay" class="lyrics-display">
                    <p class="loading-text">ğŸ¶ Cargue un archivo de audio para comenzar...</p>
                    <p class="loading-text">ğŸ¶ Load an audio file to start...</p>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button id="playPauseBtn" onclick="togglePlayPause()">â–¶ï¸ Reproducir</button>
                <button id="resetBtn" onclick="resetSong()">ğŸ”„ Reiniciar</button>
                <button onclick="logCurrentTime()">â±ï¸ Ver Tiempo Actual</button>
                <input type="file" id="audioFileInput" accept="audio/*" onchange="loadAudioFile(event)">
                <label for="audioFileInput" class="file-input-label">ğŸ“ Cargar Audio</label>
            </div>

            <!-- Sync & Calibration Tools -->
            <div class="sync-controls">
                <div class="sync-row">
                    <button id="syncModeBtn" type="button">ğŸ¬ Modo SincronizaciÃ³n: OFF</button>
                    <div class="calibration">
                        <label>
                            <input id="autoSyncInput" type="checkbox" checked>
                            Auto Sync
                        </label>
                        <label>
                            Offset (s):
                            <input id="offsetInput" type="number" step="0.05" value="0">
                        </label>
                        <label>
                            Rate:
                            <input id="rateInput" type="number" step="0.005" value="1.040">
                        </label>
                        <label>
                            Lead (s):
                            <input id="leadInput" type="number" step="0.01" value="0.15">
                        </label>
                        <label>
                            Line Lead (s):
                            <input id="lineLeadInput" type="number" step="0.01" value="0.44">
                        </label>
                    </div>
                </div>
                <div class="sync-row">
                    <button id="prevLineBtn" type="button">â®ï¸ LÃ­nea -</button>
                    <button id="nextLineBtn" type="button">â­ï¸ LÃ­nea +</button>
                    <button id="resetLineBtn" type="button">ğŸ§¹ Limpiar tiempos de lÃ­nea</button>
                    <button id="saveTimingsBtn" type="button">ğŸ’¾ Descargar tiempos</button>
                </div>
                <div class="sync-row">
                    <button id="anchorStartBtn" type="button">âš“ Anclar inicio (usa tiempo actual)</button>
                    <button id="anchorRateBtn" type="button">ğŸ“ Calcular Rate (usa este punto)</button>
                </div>
                <p class="sync-hint">En modo sincronizaciÃ³n, presiona la barra espaciadora al ritmo: una pulsaciÃ³n por palabra. Enter para cerrar la lÃ­nea, Backspace para deshacer el Ãºltimo punto.</p>
            </div>

            <!-- Timing Helper -->
            <div class="timing-helper">
                <p><strong>ğŸ”§ Para ajustar sincronizaciÃ³n:</strong></p>
                <p>1. Abre la consola del navegador (F12)</p>
                <p>2. Reproduce la canciÃ³n y ejecuta <code>logCurrentTime()</code> cuando empiece cada lÃ­nea</p>
                <p>3. Anota los tiempos y actualiza el archivo script.js</p>
                <p><span id="currentTimeDisplay">Tiempo actual: 0:00</span></p>
            </div>
        </main>

        <footer>
            <p>Creado para sincronizar letras de canciones en tiempo real</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
